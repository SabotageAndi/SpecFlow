<Project>

    
  <Target Name="GenerateCodeBehind" BeforeTargets="PreBuildEvent" DependsOnTargets="BeforeUpdateFeatureFilesInProject;UpdateFeatureFilesInProject;AfterUpdateFeatureFilesInProject">
    
  </Target>

  <!--<Target Name="UpdateFeatureFilesInProject" DependsOnTargets="BeforeUpdateFeatureFilesInProject" Inputs="@(SpecFlowFeatureFiles)" Outputs="@(SpecFlowFeatureFiles->'%(RelativeDir)\%(Filename).feature.cs')">-->
  <Target Name="UpdateFeatureFilesInProject" DependsOnTargets="BeforeUpdateFeatureFilesInProject" >
    <PropertyGroup>
      <SpecFlowCodeBehindOutputPath Condition="'$(SpecFlowCodeBehindOutputPath)' == ''">Features.Generated</SpecFlowCodeBehindOutputPath>
    </PropertyGroup>

    <ItemGroup Condition=" '@(SpecFlowFeatureFiles)' == ''">  
      <SpecFlowFeatureFiles Include="**\*.feature"/>
      <SpecFlowFeatureFiles Include="**\*.feature.xlsx" /> 
    </ItemGroup>
    
    <GenerateFeatureFileCodeBehindTask
      ProjectPath="$(MSBuildProjectFullPath)"
      OutputPath="$(SpecFlowCodeBehindOutputPath)"
      FeatureFiles="@(SpecFlowFeatureFiles)"
>
      <Output TaskParameter="GeneratedFiles" ItemName="SpecFlowGeneratedFiles" />
    </GenerateFeatureFileCodeBehindTask>
  </Target>

  <Target Name="BeforeUpdateFeatureFilesInProject">
      
  </Target>

  <Target Name="AfterUpdateFeatureFilesInProject" DependsOnTargets="UpdateFeatureFilesInProject">
  </Target>
</Project>